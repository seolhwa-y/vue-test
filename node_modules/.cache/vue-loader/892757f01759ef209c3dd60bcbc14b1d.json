{"remainingRequest":"/Users/shy/vue-workspace/diary2/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/shy/vue-workspace/diary2/src/views/mypage/myPage.vue?vue&type=style&index=0&id=07f58585&lang=css","dependencies":[{"path":"/Users/shy/vue-workspace/diary2/src/views/mypage/myPage.vue","mtime":1709046461705},{"path":"/Users/shy/vue-workspace/diary2/node_modules/css-loader/dist/cjs.js","mtime":1709049475686},{"path":"/Users/shy/vue-workspace/diary2/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1709049476350},{"path":"/Users/shy/vue-workspace/diary2/node_modules/postcss-loader/src/index.js","mtime":1709049475424},{"path":"/Users/shy/vue-workspace/diary2/node_modules/cache-loader/dist/cjs.js","mtime":1709049475848},{"path":"/Users/shy/vue-workspace/diary2/node_modules/vue-loader-v16/dist/index.js","mtime":1709049475802}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQojbXlGb3JtIHsNCiAgcGFkZGluZzogMyUgMTAlIDAlIDEwJTsNCn0NCg=="},{"version":3,"sources":["/Users/shy/vue-workspace/diary2/src/views/mypage/myPage.vue"],"names":[],"mappings":";AAmWA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACxB","file":"/Users/shy/vue-workspace/diary2/src/views/mypage/myPage.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <el-page-header @back=\"goBack\">\r\n    <template #content>\r\n      <span class=\"text-large font-600 mr-3\"> 마이페이지 </span>\r\n    </template>\r\n  </el-page-header>\r\n\r\n  <div id=\"myForm\">\r\n    <div id=\"div_el_form\">\r\n      <el-form :model=\"form\" label-width=\"120px\">\r\n        <el-form-item label=\"ID\">\r\n          <el-input v-model=\"userInfo.userID\" disabled />\r\n        </el-form-item>\r\n        <el-form-item label=\"이름\">\r\n          <el-input\r\n            v-model=\"userInfo.userNm\"\r\n            ref=\"userNm\"\r\n            type=\"text\"\r\n            placeholder=\"이름을 입력하세요.\"\r\n            maxlength=\"20\"\r\n          />\r\n        </el-form-item>\r\n        <el-form :model=\"userInfo\" label-width=\"120px\" class=\"demo-ruleForm\">\r\n          <el-form-item label=\"PASSWORD\" prop=\"password\">\r\n            <el-input\r\n              v-model=\"userInfo.password\"\r\n              id=\"password\"\r\n              ref=\"password\"\r\n              type=\"password\"\r\n              placeholder=\"비밀번호를 입력하세요.\"\r\n              maxlength=\"100\"\r\n              @keyup=\"samePassword($event)\"\r\n            />\r\n            <span class=\"el-form-item__error\" v-show=\"isCheck1\">\r\n              {{ result1 }}\r\n            </span>\r\n          </el-form-item>\r\n          <el-form-item label=\"RE-PASSWORD\" prop=\"checkPassword\">\r\n            <el-input\r\n              v-model=\"userInfo.checkPassword\"\r\n              id=\"checkPassword\"\r\n              ref=\"checkPassword\"\r\n              type=\"password\"\r\n              placeholder=\"다시 비밀번호를 입력하세요.\"\r\n              maxlength=\"100\"\r\n              @keyup=\"samePassword()\"\r\n            />\r\n            <span class=\"el-form-item__error\" v-show=\"isCheck2\">\r\n              {{ result2 }}\r\n            </span>\r\n          </el-form-item>\r\n        </el-form>\r\n        <el-form-item label=\"연락처\">\r\n          <el-input\r\n            v-model=\"userInfo.tell\"\r\n            ref=\"tell\"\r\n            type=\"tel\"\r\n            maxlength=\"14\"\r\n            placeholder=\"연락처를 입력하세요.\"\r\n            show-word-limit\r\n            @keyup=\"formTell()\"\r\n            required\r\n          />\r\n        </el-form-item>\r\n        <el-form-item style=\"margin: 0% 35%\">\r\n          <el-button type=\"primary\" @click=\"updShow = true\">수정</el-button>\r\n          <el-button @click=\"delShow = true\">회원탈퇴</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <!-- 회원탈퇴 및 수정 -->\r\n    <el-dialog v-model=\"updShow\" title=\"회원정보 수정\" width=\"500\" align-center>\r\n      <span>회원정보를 수정하시겠습니까?</span>\r\n      <template #footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button type=\"primary\" @click=\"updUserInfo('U')\">네</el-button>\r\n          <el-button @click=\"updShow = false\"> 아니요 </el-button>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <el-dialog v-model=\"delShow\" title=\"회원탈퇴\" width=\"500\" align-center>\r\n      <span>정말 회원탈퇴를 하실건가요?</span>\r\n      <template #footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button type=\"primary\" @click=\"updUserInfo('D')\">네</el-button>\r\n          <el-button @click=\"delShow = false\"> 아니요 </el-button>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      userInfo: {\r\n        userID: \"\",\r\n        userNm: \"\",\r\n        password: \"\",\r\n        checkPassword: \"\",\r\n        tell: \"\",\r\n      },\r\n      action: \"\",\r\n      updShow: false,\r\n      delShow: false,\r\n      result1: \"\",\r\n      isCheck1: false,\r\n      result2: \"\",\r\n      isCheck2: false,\r\n    };\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      this.$router.go(-1); // 이전페이지 이동\r\n    },\r\n\r\n    getInfo: function () {\r\n      this.userInfo.userID = this.$store.state.loginInfo.loginId;\r\n      this.userInfo.password = \"\";\r\n      this.userInfo.checkPassword = \"\";\r\n      this.result = \"\";\r\n\r\n      let vm = this;\r\n      let params = new URLSearchParams();\r\n      params.append(\"loginId\", this.userInfo.userID);\r\n\r\n      this.axios\r\n        .get(\"/mypage/myPage.do\", params)\r\n        .then(function (response) {\r\n          vm.userInfo.userNm = response.data.myInfo.NAME;\r\n          vm.userInfo.tell = response.data.myInfo.TELL;\r\n        })\r\n        .catch(function (error) {\r\n          alert(\"에러! API 요청에 오류가 있습니다. \" + error);\r\n        });\r\n    },\r\n\r\n    formTell: function () {\r\n      if (this.userInfo.tell.length > 3 && this.userInfo.tell.length < 9) {\r\n        this.userInfo.tell = this.userInfo.tell.replaceAll(\"-\", \"\");\r\n        this.userInfo.tell =\r\n          this.userInfo.tell.substring(0, 3) +\r\n          \"-\" +\r\n          this.userInfo.tell.substring(3, 7);\r\n      } else if (this.userInfo.tell.length == 14) {\r\n        this.userInfo.tell = this.userInfo.tell.replaceAll(\"-\", \"\");\r\n        this.userInfo.tell =\r\n          this.userInfo.tell.substring(0, 4) +\r\n          \"-\" +\r\n          this.userInfo.tell.substring(4, 8) +\r\n          \"-\" +\r\n          this.userInfo.tell.substring(8);\r\n      } else if (\r\n        this.userInfo.tell.length > 9 &&\r\n        this.userInfo.tell.length < 14\r\n      ) {\r\n        this.userInfo.tell = this.userInfo.tell.replaceAll(\"-\", \"\");\r\n        this.userInfo.tell =\r\n          this.userInfo.tell.substring(0, 3) +\r\n          \"-\" +\r\n          this.userInfo.tell.substring(3, 7) +\r\n          \"-\" +\r\n          this.userInfo.tell.substring(7);\r\n      }\r\n    },\r\n\r\n    samePassword: function () {\r\n      if (this.userInfo.password === \"\" && this.userInfo.checkPassword === \"\") {\r\n        this.changeColor(2, \"\", \"\");\r\n\r\n        return \"\";\r\n      } else {\r\n        if (this.userInfo.password === \"\") {\r\n          this.changeColor(1, \"FAIL\", \"password\");\r\n        } else if (this.userInfo.checkPassword === \"\") {\r\n          this.changeColor(1, \"FAIL\", \"checkPassword\");\r\n        } else if (this.userInfo.password !== this.userInfo.checkPassword) {\r\n          this.changeColor(2, \"FAIL\", \"checkPassword\");\r\n        } else if (this.userInfo.password === this.userInfo.checkPassword) {\r\n          this.changeColor(2, \"\", \"\");\r\n\r\n          return true;\r\n        }\r\n\r\n        return null;\r\n      }\r\n    },\r\n\r\n    changeColor: function (no, that, id) {\r\n      let pass =\r\n        document.getElementById(\"password\").parentNode.parentNode.parentNode\r\n          .parentNode;\r\n      let checkPass =\r\n        document.getElementById(\"checkPassword\").parentNode.parentNode\r\n          .parentNode.parentNode;\r\n\r\n      if (no == 2) {\r\n        if (that != \"FAIL\") {\r\n          this.isCheck1 = false;\r\n          this.result1 = \"\";\r\n          this.isCheck2 = false;\r\n          this.result2 = \"\";\r\n\r\n          pass.className = \"el-form-item asterisk-left is-focus\";\r\n          checkPass.className = \"el-form-item asterisk-left is-focus\";\r\n        } else {\r\n          this.isCheck1 = false;\r\n          this.result1 = \"\";\r\n          this.isCheck2 = true;\r\n          this.result2 = \"비밀번호가 일치하지 않습니다.\";\r\n\r\n          pass.className =\r\n            \"el-form-item asterisk-left el-form-item--feedback is-error\";\r\n          checkPass.className =\r\n            \"el-form-item asterisk-left el-form-item--feedback is-error\";\r\n        }\r\n      } else if (no == 1) {\r\n        if (that === \"SUCCESS\") {\r\n          if (id == \"password\") {\r\n            pass.className = \"el-form-item asterisk-left is-focus\";\r\n          } else {\r\n            checkPass.className = \"el-form-item asterisk-left is-focus\";\r\n          }\r\n        } else if (that === \"FAIL\") {\r\n          if (id === \"password\") {\r\n            this.isCheck1 = true;\r\n            this.result1 = \"비밀번호를 입력하세요.\";\r\n            this.isCheck2 = false;\r\n            this.result2 = \"\";\r\n\r\n            pass.className =\r\n              \"el-form-item asterisk-left el-form-item--feedback is-error\";\r\n            checkPass.className = \"el-form-item asterisk-left is-focus\";\r\n          } else if (id === \"checkPassword\") {\r\n            this.isCheck1 = false;\r\n            this.result1 = \"\";\r\n            this.isCheck2 = true;\r\n            this.result2 = \"비밀번호를 입력하세요.\";\r\n\r\n            pass.className = \"el-form-item asterisk-left is-focus\";\r\n            checkPass.className =\r\n              \"el-form-item asterisk-left el-form-item--feedback is-error\";\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    checkValidition: function () {\r\n      let params = new URLSearchParams();\r\n\r\n      if (this.userInfo.userNm != \"\") {\r\n        params.append(\"name\", this.userInfo.userNm);\r\n\r\n        if (this.samePassword()) {\r\n          params.append(\"password\", this.userInfo.checkPassword);\r\n        } else if (this.samePassword() == null) {\r\n          ElMessage({\r\n            message: \"사용자 비밀번호를 확인해주세요.\",\r\n            type: \"warning\",\r\n          });\r\n\r\n          this.$refs.checkPassword.focus();\r\n\r\n          return null;\r\n        }\r\n\r\n        if (\r\n          /[0-9]{3}-[0-9]{4}-[0-9]{4}/.test(this.userInfo.tell) &&\r\n          this.userInfo.tell != \"\"\r\n        ) {\r\n          params.append(\"tell\", this.userInfo.tell);\r\n        } else {\r\n          ElMessage({\r\n            message: \"사용자 연락처를 확인해주세요.\",\r\n            type: \"warning\",\r\n          });\r\n\r\n          this.$refs.tell.focus();\r\n\r\n          return null;\r\n        }\r\n\r\n        return params;\r\n      } else {\r\n        ElMessage({\r\n          message: \"사용자 이름을 확인해주세요.\",\r\n          type: \"warning\",\r\n        });\r\n\r\n        this.$refs.userNm.focus();\r\n\r\n        return null;\r\n      }\r\n    },\r\n\r\n    updUserInfo: function (act) {\r\n      let vm = this;\r\n\r\n      if (act == \"D\") {\r\n        // 회원탈퇴\r\n        this.axios\r\n          .post(\"/mypage/resign.do\")\r\n          .then(function (response) {\r\n            if (response.data.MESSAGE == \"SUCCESS\") {\r\n              vm.delShow = false;\r\n\r\n              ElMessage({\r\n                message: \"회원탈퇴가 완료되었습니다.\",\r\n                type: \"success\",\r\n              });\r\n\r\n              vm.$router.push(\"/\");\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            ElMessage.error(\"에러! API 요청에 오류가 있습니다. \" + error);\r\n          });\r\n      } else if (act == \"U\") {\r\n        // 회원정보 수정\r\n        this.updShow = false;\r\n\r\n        const param = this.checkValidition();\r\n\r\n        if (param == null) {\r\n          return false;\r\n        }\r\n\r\n        this.axios\r\n          .post(\"/mypage/updInfo.do\", param)\r\n          .then(function (response) {\r\n            if (response.data.MESSAGE == \"SUCCESS\") {\r\n              vm.$store.state.loginInfo.userNm = vm.userInfo.userNm;\r\n              vm.getInfo();\r\n\r\n              ElMessage({\r\n                message: \"회원정보 수정이 완료되었습니다.\",\r\n                type: \"success\",\r\n              });\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            ElMessage.error(\"에러! API 요청에 오류가 있습니다. \" + error);\r\n          });\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getInfo();\r\n  },\r\n};\r\n</script>\r\n<style>\r\n#myForm {\r\n  padding: 3% 10% 0% 10%;\r\n}\r\n</style>\r\n"]}]}